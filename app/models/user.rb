class User < ApplicationRecord
# ------------------------------------------------------------------------------
# Includes & Extensions
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
# Constants
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
# Attributes
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
# Associations
# ------------------------------------------------------------------------------

has_many :events

# ------------------------------------------------------------------------------
# Validations
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
# Callbacks
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
# Nested Attributes
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
# Scopes
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
# Other
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
# Class Methods
# ------------------------------------------------------------------------------

def self.koala(auth)
	access_token = auth['auth_token']
	@graph = Koala::Facebook::API.new(access_token)
	profile = @graph.get_object("me?fields=email,name,picture")
	return profile
end


# ------------------------------------------------------------------------------
# Instance Methods
# ------------------------------------------------------------------------------

def update_details(profile, user_params)

	auth = user_params['auth_token']
	self.auth_token = auth
	self.uid =  profile['id']
	self.name = profile['name']
	self.picture =  profile['picture']['data']['url']
	self.email = profile['email']
end


# ------------------------------------------------------------------------------
protected
# ------------------------------------------------------------------------------



# ------------------------------------------------------------------------------
private
# ------------------------------------------------------------------------------





end
